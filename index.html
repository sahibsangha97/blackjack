<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Blackjack</title>

<style>
:root{
  --bg:#04160f;
  --felt:#0b3b2a;
  --felt2:#07271c;
  --card:#f8fafc;
  --ink:#0f172a;
  --shadow: 0 22px 70px rgba(0,0,0,.55);
}
*{box-sizing:border-box;}
html,body{height:100%;}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Arial,sans-serif;
  background:radial-gradient(900px 600px at 50% 100%,rgba(0,200,255,.10),transparent 55%),var(--bg);
  overflow:hidden;
  color:white;
}

#confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:50;
}

.wrap{
  height:100%;
  display:grid;
  place-items:center;
}

.table{
  width:min(1100px,98vw);
  aspect-ratio:16/10;
  min-height:520px;
  border-radius:999px;
  background:
    radial-gradient(1200px 700px at 50% 70%,rgba(255,255,255,.08),transparent 60%),
    linear-gradient(160deg,var(--felt),var(--felt2));
  border:1px solid rgba(255,255,255,.14);
  box-shadow:var(--shadow);
  position:relative;
  overflow:hidden;
  perspective:1100px;
}

.rail{
  position:absolute;
  inset:10px;
  border-radius:999px;
  border:10px solid rgba(84,42,18,.55);
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.08);
}

.zone{
  position:absolute;
  left:10%;
  right:10%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
}

.zone.dealer{
  top:18%;
  transform:translateZ(-90px) scale(.92);
}

.zone.player{
  bottom:20%;
  transform:translateZ(90px) scale(1.05);
}

.hand{
  display:flex;
  gap:12px;
  min-height:140px;
  align-items:center;
}

.card{
  width:110px;
  height:150px;
  background:var(--card);
  color:var(--ink);
  border-radius:16px;
  box-shadow:0 18px 34px rgba(0,0,0,.24);
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  font-weight:900;
  font-size:18px;
}

.controls{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:6%;
  display:flex;
  gap:10px;
}

button{
  border:0;
  padding:12px 14px;
  border-radius:999px;
  font-weight:900;
  cursor:pointer;
  background:rgba(255,255,255,.10);
  color:white;
  border:1px solid rgba(255,255,255,.14);
}

button.primary{background:rgba(251,191,36,.18);}
button.danger{background:rgba(220,38,38,.16);}
button:disabled{opacity:.45;cursor:not-allowed;}

.toast{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:16%;
  font-weight:900;
  text-align:center;
}
</style>
</head>

<body>

<canvas id="confetti"></canvas>

<div class="wrap">
  <div class="table">
    <div class="rail"></div>

    <div class="zone dealer">
      <div class="hand" id="dealerHand"></div>
    </div>

    <div class="zone player">
      <div class="hand" id="playerHand"></div>
    </div>

    <div class="controls">
      <button class="primary" id="dealBtn">DEAL</button>
      <button id="hitBtn" disabled>HIT</button>
      <button class="danger" id="standBtn" disabled>STAND</button>
      <button id="resetBtn">RESET</button>
    </div>

    <div class="toast" id="toast"></div>
  </div>
</div>

<script>
const DEALER_STAND_CARD_TEXT="I hate you, Diya :)";
const hitSequence=["Be","My","Valentine?"];

const dealerHand=document.getElementById("dealerHand");
const playerHand=document.getElementById("playerHand");
const dealBtn=document.getElementById("dealBtn");
const hitBtn=document.getElementById("hitBtn");
const standBtn=document.getElementById("standBtn");
const resetBtn=document.getElementById("resetBtn");
const toast=document.getElementById("toast");

let gameStarted=false;
let hitIndex=0;

let audioCtx=null;
function sound(){
  if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();
  const t=audioCtx.currentTime;
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.type="triangle";
  osc.frequency.setValueAtTime(200,t);
  gain.gain.setValueAtTime(0.05,t);
  gain.gain.exponentialRampToValueAtTime(0.0001,t+.08);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start(t);
  osc.stop(t+.08);
}

function card(text){
  const c=document.createElement("div");
  c.className="card";
  c.textContent=text;
  return c;
}

function deal(){
  if(gameStarted) return;
  gameStarted=true;
  playerHand.appendChild(card("Will")); sound();
  playerHand.appendChild(card("You")); sound();
  dealerHand.appendChild(card("Qâ™¥")); sound();
  dealBtn.disabled=true;
  hitBtn.disabled=false;
  standBtn.disabled=false;
  toast.textContent="";
}

function hit(){
  if(hitIndex>=hitSequence.length) return;
  const word=hitSequence[hitIndex];
  playerHand.appendChild(card(word));
  sound();
  if(word==="Valentine?") confetti();
  hitIndex++;
  if(hitIndex===hitSequence.length) hitBtn.disabled=true;
}

function stand(){
  dealerHand.appendChild(card(DEALER_STAND_CARD_TEXT));
  sound();
  hitBtn.disabled=true;
  standBtn.disabled=true;
}

function reset(){
  dealerHand.innerHTML="";
  playerHand.innerHTML="";
  hitIndex=0;
  gameStarted=false;
  dealBtn.disabled=false;
  hitBtn.disabled=true;
  standBtn.disabled=true;
}

dealBtn.onclick=deal;
hitBtn.onclick=hit;
standBtn.onclick=stand;
resetBtn.onclick=reset;

/* Confetti */
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
resize(); window.onresize=resize;

function confetti(){
  const pieces=150;
  const arr=[];
  for(let i=0;i<pieces;i++){
    arr.push({x:innerWidth/2,y:innerHeight/2,vx:(Math.random()-0.5)*10,vy:-Math.random()*12,g:.2,life:100});
  }
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    arr.forEach(p=>{
      p.x+=p.vx;
      p.y+=p.vy;
      p.vy+=p.g;
      p.life--;
      ctx.fillStyle=`hsl(${Math.random()*360},90%,60%)`;
      ctx.fillRect(p.x,p.y,6,6);
    });
    if(arr.some(p=>p.life>0)) requestAnimationFrame(draw);
  }
  draw();
}
</script>
</body>
</html>
